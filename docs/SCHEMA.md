# Meeting Data Schema

This document describes the complete schema for meeting data stored in the Back4app `Meetings` class.

## Core Fields

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `objectId` | String | Auto | Unique identifier (generated by Parse) |
| `uniqueKey` | String | Yes | Deduplication key: `name|location|day|time` |
| `name` | String | Yes | Meeting name (e.g., "Saturday Morning Serenity") |
| `slug` | String | No | URL-friendly identifier |

## Meeting Type

| Field | Type | Description |
|-------|------|-------------|
| `meetingType` | String | Primary type: `AA`, `NA`, `Al-Anon`, or `Other` |
| `types` | Array | Meeting format codes (see [Type Codes](#type-codes) below) |

## Schedule

| Field | Type | Description |
|-------|------|-------------|
| `day` | Number | Day of week: 0=Sunday, 1=Monday, ... 6=Saturday |
| `time` | String | Start time in 24-hour format: `HH:MM` (e.g., "19:30") |
| `endTime` | String | End time in 24-hour format (optional) |
| `timezone` | String | IANA timezone (e.g., "America/Los_Angeles") |

## Location

| Field | Type | Description |
|-------|------|-------------|
| `locationName` | String | Venue name (e.g., "St. Michael's Church") |
| `address` | String | Street address |
| `city` | String | City name |
| `state` | String | Two-letter state code (e.g., "CA", "TX") |
| `postalCode` | String | ZIP/postal code |
| `country` | String | Country code (default: "US") |
| `formattedAddress` | String | Full formatted address |
| `locationNotes` | String | Additional location info (room number, entrance) |

## Geolocation

| Field | Type | Description |
|-------|------|-------------|
| `latitude` | Number | GPS latitude coordinate |
| `longitude` | Number | GPS longitude coordinate |
| `location` | GeoPoint | Parse GeoPoint for proximity queries |

## Online Meeting Info

| Field | Type | Description |
|-------|------|-------------|
| `isOnline` | Boolean | `true` if meeting is online-only |
| `isHybrid` | Boolean | `true` if meeting is both in-person and online |
| `onlineUrl` | String | Video conference URL (Zoom, Google Meet, etc.) |
| `conferencePhone` | String | Phone dial-in number |
| `conferencePhoneNotes` | String | Meeting ID, passcode, etc. |

## Metadata

| Field | Type | Description |
|-------|------|-------------|
| `source` | String | Feed name this meeting was scraped from |
| `sourceUrl` | String | Original meeting URL |
| `notes` | String | Additional meeting notes |
| `updatedAt` | Date | Last modification timestamp (auto) |
| `createdAt` | Date | Creation timestamp (auto) |

---

## Type Codes

Meeting format codes used in the `types` array:

### Participation

| Code | Description |
|------|-------------|
| `O` | Open (anyone may attend) |
| `C` | Closed (alcoholics/addicts only) |
| `M` | Men only |
| `W` | Women only |
| `LGBTQ` | LGBTQ+ focused |

### Format

| Code | Description |
|------|-------------|
| `D` | Discussion |
| `SP` | Speaker |
| `ST` | Step meeting |
| `BB` | Big Book study |
| `12x12` | Twelve & Twelve study |
| `B` | Beginners |
| `H` | Birthday/Anniversary |
| `MED` | Meditation |

### Accessibility

| Code | Description |
|------|-------------|
| `X` | Wheelchair accessible |
| `S` | ASL (sign language) |
| `AL` | Concurrent Al-Anon |

### Attendance

| Code | Description |
|------|-------------|
| `ONL` | Online only |
| `HY` | Hybrid (in-person + online) |
| `TC` | Temporary closure |

---

## Example Meeting Object

```json
{
  "objectId": "abc123xyz",
  "uniqueKey": "saturday morning serenity|st. michael's church|6|09:00",
  "name": "Saturday Morning Serenity",
  "meetingType": "AA",
  "types": ["O", "D", "X"],
  "day": 6,
  "time": "09:00",
  "endTime": "10:00",
  "locationName": "St. Michael's Church",
  "address": "123 Main Street",
  "city": "San Diego",
  "state": "CA",
  "postalCode": "92101",
  "formattedAddress": "123 Main Street, San Diego, CA 92101",
  "latitude": 32.7157,
  "longitude": -117.1611,
  "isOnline": false,
  "isHybrid": true,
  "onlineUrl": "https://zoom.us/j/123456789",
  "source": "San Diego AA",
  "notes": "Parking available in back lot"
}
```

---

## Querying the Schema

### By State
```
/api/meetings?state=CA
```

### By Day
```
/api/meetings?day=6
```

### By Meeting Type
```
/api/meetings?meetingType=AA
```

### Nearby (requires lat/lng)
```
/api/meetings?lat=32.7157&lng=-117.1611&radius=10
```

---

## Parse SDK Queries

### iOS (Swift)
```swift
let query = Meeting.query()
    .where("state" == "CA")
    .where("day" == 6)
    .order([.ascending("time")])
```

### Android (Kotlin)
```kotlin
val query = ParseQuery.getQuery(Meeting::class.java)
query.whereEqualTo("state", "CA")
query.whereEqualTo("day", 6)
query.orderByAscending("time")
```

---

See [Mobile Quick Start Guide](MOBILE_QUICKSTART.md) for complete integration examples.
